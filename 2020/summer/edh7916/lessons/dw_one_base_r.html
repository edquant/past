<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="/edh7916/assets/css/style.css">
<link rel="stylesheet" href="/edh7916/assets/css/syntax_default.css">
<link rel="shortcut icon" type="image/png" href="/edh7916/assets/img/favicon.ico">
<link crossorigin="anonymous" media="all" integrity="sha512-uhAd27cNiLn0VE2GVEVUN8D5zW0o7s0QTnCGMnJZkL2HqN9/LwHDi4ndTPJH0upUQHYl/8QF6cwbOYp/KIzlJQ==" rel="stylesheet" href="https://github.githubassets.com/assets/github-be4e45349cf088df7a6636f437c0a167.css" />
<script defer src="/edh7916/assets/js/all.min.js"></script>
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<title>edquant | EDH 7916: Contemporary Research in Higher Education</title>

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>EDH 7916: Contemporary Research in Higher Education<a href="https://github.com/edquant/edh7916" class="iconlink">
	      <i class="fab fa-github fa-sm"></i></a></h1>
	<h2 class="thin">Summer 2020 (Session C)</h2>
	<p>A course in quantitative research workflow for students in
the higher education administration program at the University of Florida
</p>
	<!-- side / top bar menu -->
	<h2 class="thin">
	  <a href="/edh7916/">Overview</a></br>
	  <a href="/edh7916/syllabus/">Course
	    information</a></br>
	  <!-- <a href="/edh7916/location/">Meeting -->
	  <!--   location</a></br> -->
	  <a href="/edh7916/software/">Software</a></br>
	  <a href="/edh7916/schedule/">Schedule</a></br>
	  <a href="/edh7916/lessons/">Lessons</a></br>
	  <a href="/edh7916/assignments/">Assignments</a></br>
	  <a href="/edh7916/questions/">Questions</a></br>
	  <a href="/edh7916/past/">Past courses</a></br>
	  <a href="/edh7916/about/">About</a></br>	  
	</h2>
      </header>

      <section>
	<h1>Data Wrangling with Base R</h1>
	

	
<p>
  
  <a href="/edh7916/assets/pdf/dw_one_base_r.pdf"
     class="iconlink" download title="Get PDF of lesson">
  <i class="far fa-file-pdf fa-2x"></i>
  </a>
  
  &nbsp;&nbsp;
  
  <a href="/edh7916/scripts/dw_one_base_r.R"
     class="iconlink" download title="Get script">
    <i class="fas fa-code fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
  
  
  
  
  <a href="/edh7916/data/hsls_small.csv"
     class="iconlink" download title="Get data">
    <i class="fas fa-database fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
  
</p>


<p>This supplemental lesson is a companion to the <a href="../lessons/dw_one.html">lesson on data
wrangling with Tidyverse</a>. While the
tidyverse has fundamentally changed the way many people work with R,
you can still use base or “vanilla” R for your data wrangling
tasks. You may find it useful to perform an example data analysis
without the support of the tidyverse.</p>

<p>Because much of the material is otherwise the same, we won’t go into
the same depth in this supplemental lesson (you’ll even see some
repeated text). We’ll simply work to answer the research question
posed in the other lesson.</p>

<h1 id="example-data-analysis-task">Example data analysis task</h1>

<p>Let’s imagine we’ve been given the following data analysis task with
the HSLS09 data:</p>

<blockquote>
  <p><em>Figure out average differences in college degree expectations
across census regions; for a first pass, ignore missing values and
use the higher of student and parental expectations if an
observation has both</em>.</p>
</blockquote>

<p>A primary skill (often unremarked upon) in data analytic work is
translation. Your advisor, IR director, funding agency director —
even collaborator — won’t speak to you in the language of R.
Instead, it’s up to you to (1) translate a research question into the
discrete steps coding steps necessary to provide an answer, and then
(2) translate the answer such that everyone understands what you’ve
found.</p>

<p>What we need to do is some combination of the following:</p>

<ol>
  <li><strong>Read</strong> in the data</li>
  <li><strong>Select</strong> the variables we need</li>
  <li><strong>Mutate</strong> a new value that’s the higher of student and parental
degree expectations</li>
  <li><strong>Filter</strong> out observations with missing degree expectation values</li>
  <li><strong>Summarize</strong> the data within region to get average degree
expectation values</li>
  <li><strong>Arrange</strong> in order so it’s easier to rank and share</li>
  <li><strong>Write</strong> out the results to a file so we have it for later</li>
</ol>

<p>Let’s do it!</p>

<p><strong>NOTE:</strong> Since we’re not using the <strong>tidyverse</strong>, we don’t need to
call it this time. Even with non-tidyverse R, you may need to call
libraries. This analysis, however, does not require any.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## libraries</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="c1">## NONE</span><span class="w">
</span></code></pre></div></div>
<h1 id="check-working-directory">Check working directory</h1>

<p>This script — like the one from the <a href="../lessons/organizing.html">organizing
lesson</a> — assumes that the
<code class="language-plaintext highlighter-rouge">scripts</code> subdirectory is the working directory, that the required
data file is in the <code class="language-plaintext highlighter-rouge">data</code> subdirectory, and that both subdirectories
are at the same level in the course directory. Like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>edh7916/                 &lt;--- Top-level
|
|__/data                 &lt;--- Sub-level 1
|    |--+ hsls_small.csv
|
|__/scripts              &lt;--- Sub-level 1 (Working directory)
     |--+ dw_one_base_r.R
</code></pre></div></div>

<p>If you need a refresher on setting the working directory, see the
<a href="../lessons/organizing.html">prior lesson</a>.</p>

<p><strong>Notice</strong> that I’m not setting (<em>i.e.</em> hard coding) the working
directory in the script. That would not work well for sharing the
code. Instead, I tell you where you need to be (a common landmark),
let you get there, and then rely on relative paths afterwards.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## directory paths</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="c1">## assume we're running this script from the ./scripts subdirectory</span><span class="w">
</span><span class="n">dat_dir</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">file.path</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h1 id="read-in-data"><strong>Read</strong> in data</h1>

<p>For this lesson, we’ll use a subset of the <a href="https://nces.ed.gov/surveys/hsls09/">High School Longitudinal
Study of 2009 (HSLS09)</a>, an IES /
NCES data set that features:</p>

<blockquote>
  <ul>
    <li>Nationally representative, longitudinal study of 23,000+ 9th graders
from 944 schools in 2009, with a first follow-up in 2012 and a second
follow-up in 2016</li>
    <li>Students followed throughout secondary and postsecondary years</li>
    <li>Surveys of students, their parents, math and science teachers,
school administrators, and school counselors</li>
    <li>A new student assessment in algebraic skills, reasoning, and problem solving for
9th and 11th grades</li>
    <li>10 state representative data sets</li>
  </ul>
</blockquote>

<p>If you are interested in using HSLS09 for future projects, <strong>DO NOT</strong>
rely on this subset. Be sure to download the full data set with all
relevant variables and weights if that’s the case. But for our
purposes in this lesson, it will work just fine.</p>

<p>Throughout, we’ll need to consult the code book. An <a href="https://nces.ed.gov/OnlineCodebook/">online version can
be found at this link (after a little navigation)</a>.</p>

<blockquote>
  <h4 id="quick-exercise">Quick exercise</h4>
  <p>Follow the code book link above in your browser and navigate to the
HSLS09 code book.</p>
</blockquote>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## input</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="c1">## data are CSV, so we use read.csv(), which is base R function</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">dat_dir</span><span class="p">,</span><span class="w"> </span><span class="s2">"hsls_small.csv"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Unlike the <code class="language-plaintext highlighter-rouge">read_csv()</code> function we’ve used before, <code class="language-plaintext highlighter-rouge">read.csv()</code>
(notice the difference: a <code class="language-plaintext highlighter-rouge">.</code> instead of an <code class="language-plaintext highlighter-rouge">_</code>) doesn’t print
anything. So that we can see our data, well print to the
console. <strong>BUT</strong> before we do that…</p>

<p><code class="language-plaintext highlighter-rouge">read.csv()</code> returns a base R <code class="language-plaintext highlighter-rouge">data.frame()</code> rather than the special
data frame or <code class="language-plaintext highlighter-rouge">tibble()</code> that the tidyverse uses. It’s mostly the
same, but one difference is that whereas R will only print the
first 10 rows of a tibble, it will print the <em>entire</em> <code class="language-plaintext highlighter-rouge">data.frame</code>. We
don’t need to see the whole thing, so we’ll use the <code class="language-plaintext highlighter-rouge">head()</code> function
to print only the first 10 rows.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show first 10 rows</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   stu_id x1sex x1race x1stdob x1txmtscor x1paredu x1hhnumber x1famincome
1   10001     1      8  199502    59.3710        5          3          10
2   10002     2      8  199511    47.6821        3          6           3
3   10003     2      3  199506    64.2431        7          3           6
4   10004     2      8  199505    49.2690        4          2           5
5   10005     1      8  199505    62.5897        4          4           9
6   10006     2      8  199504    58.1268        3          6           5
7   10007     2      8  199409    49.4960        2          2           4
8   10008     1      8  199410    54.6249        7          3           7
9   10009     1      8  199501    53.1875        2          3           4
10  10010     2      8  199503    63.7986        3          4           4
   x1poverty185   x1ses x1stuedexpct x1paredexpct x1region x4hscompstat
1             0  1.5644            8            6        2            1
2             1 -0.3699           11            6        1            1
3             0  1.2741           10           10        4            1
4             0  0.5498           10           10        3            1
5             0  0.1495            6           10        3            1
6             0  1.0639           10            8        3           -8
7             0 -0.4300            8           11        1            1
8             0  1.5144            8            6        1            1
9             0 -0.3103           11           11        3            1
10            0  0.0451            8            6        1           -8
   x4evratndclg x4hs2psmos
1             1          3
2             1          3
3             1          4
4             0         -7
5             0         -7
6            -8         -8
7             1          2
8             1          3
9             1          8
10           -8         -8
</code></pre></div></div>

<blockquote>
  <h4 id="quick-exercise-1">Quick exercise</h4>
  <p><code class="language-plaintext highlighter-rouge">read.csv()</code> is special version of <code class="language-plaintext highlighter-rouge">read.table()</code>,
which can read various <em>delimited</em> file types, that is, tabular data
in which data cells are separated by a special character. What’s the
special character used to separate <em>CSV</em> files? Once you figure it
out, re-read in the data using <code class="language-plaintext highlighter-rouge">read.table()</code>, being sure to set the
<code class="language-plaintext highlighter-rouge">sep</code> argument to the correct character.</p>
</blockquote>

<p>You’ll also notice that the data.frame doesn’t tell use the types of
our columns. If we really want to know, we can use the <code class="language-plaintext highlighter-rouge">class()</code>
function. So that we can see all columns, we can use the <code class="language-plaintext highlighter-rouge">sapply()</code>
function, which will let us <em>apply</em> the <code class="language-plaintext highlighter-rouge">class()</code> function across all
columns.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show column types</span><span class="w">
</span><span class="n">sapply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">class</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      stu_id        x1sex       x1race      x1stdob   x1txmtscor     x1paredu 
   "integer"    "integer"    "integer"    "integer"    "numeric"    "integer" 
  x1hhnumber  x1famincome x1poverty185        x1ses x1stuedexpct x1paredexpct 
   "integer"    "integer"    "integer"    "numeric"    "integer"    "integer" 
    x1region x4hscompstat x4evratndclg   x4hs2psmos 
   "integer"    "integer"    "integer"    "integer" 
</code></pre></div></div>

<h1 id="select-variables-columns"><strong>Select</strong> variables (columns)</h1>

<p>Data frames are like special matrices. They have rows and columns. You
can access these rows and columns using square bracket notation
(<code class="language-plaintext highlighter-rouge">[]</code>). Because a matrix has two dimensions, you use a comma inside
the square brackets to indicate what you mean (<code class="language-plaintext highlighter-rouge">[,]</code>):</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">df[&lt;rows&gt;,&lt;cols&gt;]</code></li>
</ul>

<p>At it’s most basic, you can use numbers to represent the index of the
cell or cells you’re interested in. For example, if you want to access
the value of the cell in row 1, column 4, you can use:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show value at row 1, col 4</span><span class="w">
</span><span class="n">df</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 199502
</code></pre></div></div>

<p>Because data frames have column names (the variable names in our data
set), we can also refer to them by name. The fourth column is the
student date of birth variable, <code class="language-plaintext highlighter-rouge">x1stdob</code>. Using that instead of <code class="language-plaintext highlighter-rouge">4</code>
(notice the quotation marks <code class="language-plaintext highlighter-rouge">""</code>):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show value at row 1, x1stdob column</span><span class="w">
</span><span class="n">df</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"x1stdob"</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 199502
</code></pre></div></div>

<p>If we want to see more than one column, we can put the names in a
concatenated vector using the <code class="language-plaintext highlighter-rouge">c()</code> function:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show values at row 1, stu_id &amp; x1stdob column</span><span class="w">
</span><span class="n">df</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"stu_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"x1stdob"</span><span class="p">)]</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  stu_id x1stdob
1  10001  199502
</code></pre></div></div>

<p>So far, we’ve not assigned these results to anything, so they’ve just
printed to the console. However, we can assign them to a new
object. If we want to slice our data so that we only have selected
columns, we can leave the rows section blank (meaning we want all
rows) and include all the columns we want to keep in our new data
frame object.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## -----------------</span><span class="w">
</span><span class="c1">## select</span><span class="w">
</span><span class="c1">## -----------------</span><span class="w">

</span><span class="c1">## select columns we need and assign to new object</span><span class="w">
</span><span class="n">df_tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"stu_id"</span><span class="p">,</span><span class="w"> </span><span class="s2">"x1stuedexpct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"x1paredexpct"</span><span class="p">,</span><span class="w"> </span><span class="s2">"x1region"</span><span class="p">)]</span><span class="w">

</span><span class="c1">## show 10 rows</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   stu_id x1stuedexpct x1paredexpct x1region
1   10001            8            6        2
2   10002           11            6        1
3   10003           10           10        4
4   10004           10           10        3
5   10005            6           10        3
6   10006           10            8        3
7   10007            8           11        1
8   10008            8            6        1
9   10009           11           11        3
10  10010            8            6        1
</code></pre></div></div>

<h1 id="mutate-data-into-new-forms"><strong>Mutate</strong> data into new forms</h1>

<h2 id="changing-existing-variables-columns">Changing existing variables (columns)</h2>

<p>To conditionally change a variable, we’ll once again use the bracket
notation to target our changes. This time, however, we do a couple of
things differently:</p>

<ul>
  <li>include square brackets on the LHS of the assignment</li>
  <li>use conditions in the <code class="language-plaintext highlighter-rouge">&lt;rows&gt;</code> part of the bracket</li>
</ul>

<p>As before, we need to account for the fact that our two expectation
variables, <code class="language-plaintext highlighter-rouge">x1stuedexpct</code> and <code class="language-plaintext highlighter-rouge">x1paredexpct</code>, have values that need to
be converted to <code class="language-plaintext highlighter-rouge">NA</code>: <code class="language-plaintext highlighter-rouge">-8</code>, <code class="language-plaintext highlighter-rouge">-9</code>, and <code class="language-plaintext highlighter-rouge">11</code>. <a href="../lessons/dw_one.html">See the first data
wrangling lesson for the rationale behind these changes.</a></p>

<p>First, let’s look at the unique values using the <code class="language-plaintext highlighter-rouge">table()</code>
function. So that we see any missing values, we’ll include an extra argument:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## -----------------</span><span class="w">
</span><span class="c1">## mutate</span><span class="w">
</span><span class="c1">## -----------------</span><span class="w">

</span><span class="c1">## see unique values for student expectation</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  -8    1    2    3    4    5    6    7    8    9   10   11 
2059   93 2619  140 1195  115 3505  231 4278  176 4461 4631 
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## see unique values for parental expectation</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  -9   -8    1    2    3    4    5    6    7    8    9   10   11 
  32 6715   55 1293  149 1199  133 4952   76 3355   37 3782 1725 
</code></pre></div></div>

<p>Notice that we use a dollar sign, <code class="language-plaintext highlighter-rouge">$</code>, to call the column name
directly. Unlike with the tidyverse, we cannot just use the column
name. Base R will look for that column name not as a column in a data
frame, but as its own object. It probably won’t find it (or worse,
you’ll have another object in memory that it will find and you’ll get
the wrong thing!).</p>

<p>Remember how data.frames are special matrices? One of the special
features is that you can use the <code class="language-plaintext highlighter-rouge">$</code> sign with the column name as a
short cut or double square brackets without the comma.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## each version pulls the column of data for student expectations</span><span class="w">
</span><span class="c1">## TRUE == 1, so if the mean of all values == 1, then all are TRUE</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">df_tmp</span><span class="p">[,</span><span class="w"> </span><span class="s2">"x1stuedexpct"</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mean</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">df_tmp</span><span class="p">[[</span><span class="s2">"x1stuedexpct"</span><span class="p">]])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] TRUE
</code></pre></div></div>

<p>Back to replacing our missing values with <code class="language-plaintext highlighter-rouge">NA</code>…</p>

<p>The conditions we care about are when <code class="language-plaintext highlighter-rouge">df_tmp$x1stuedexpct == -8</code>, for
example. Using that condition in the row section of the square
bracket, we can replace only what we want.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## replace student expectation values</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">[</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">-8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">[</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">11</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">

</span><span class="c1">## replace parent expectation values</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">[</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">-8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">[</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">-9</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">[</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">11</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span></code></pre></div></div>

<p>What each of these lines says is (first one for example): <em>In the
data.frame <code class="language-plaintext highlighter-rouge">df_tmp</code>, replace the value in <code class="language-plaintext highlighter-rouge">x1stuedexpct</code> — where the
value of <code class="language-plaintext highlighter-rouge">df_tmp$x1stuedexpct</code> is <code class="language-plaintext highlighter-rouge">-8</code> — with <code class="language-plaintext highlighter-rouge">NA</code></em></p>

<p>As less convoluted way of saying this might be (more generally
stated): <em>Where the value in column A equals X, replace the value in
column A with Y</em>.</p>

<p>Let’s confirm using <code class="language-plaintext highlighter-rouge">table()</code> again. The values that were in <code class="language-plaintext highlighter-rouge">-8</code>,
<code class="language-plaintext highlighter-rouge">-9</code>, and <code class="language-plaintext highlighter-rouge">11</code> should now be summed under <code class="language-plaintext highlighter-rouge">NA</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## see unique values for student expectation (confirm changes)</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   1    2    3    4    5    6    7    8    9   10 &lt;NA&gt; 
  93 2619  140 1195  115 3505  231 4278  176 4461 6690 
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## see unique values for parental expectation (confirm changes)</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   1    2    3    4    5    6    7    8    9   10 &lt;NA&gt; 
  55 1293  149 1199  133 4952   76 3355   37 3782 8472 
</code></pre></div></div>
<h2 id="adding-new-variables-columns">Adding new variables (columns)</h2>

<p>Adding a new variable to our data frame is just like modifying an
existing column. The only difference is that instead of putting an
existing column name after the first <code class="language-plaintext highlighter-rouge">$</code> sign, we’ll
make up a new name. This tells R to add a new column to our data
frame.</p>

<p>As with the tidyverse version, we’ll use the <code class="language-plaintext highlighter-rouge">ifelse()</code> function to
create a new variable that is the higher of student or parental
expectations.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## add new column</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">,</span><span class="w"> </span><span class="c1"># test</span><span class="w">
                            </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">,</span><span class="w">                       </span><span class="c1"># if TRUE</span><span class="w">
                            </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">)</span><span class="w">                       </span><span class="c1"># if FALSE</span><span class="w">

</span><span class="c1">## show first 10 rows</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   stu_id x1stuedexpct x1paredexpct x1region high_expct
1   10001            8            6        2          8
2   10002           NA            6        1         NA
3   10003           10           10        4         10
4   10004           10           10        3         10
5   10005            6           10        3         10
6   10006           10            8        3         10
7   10007            8           NA        1         NA
8   10008            8            6        1          8
9   10009           NA           NA        3         NA
10  10010            8            6        1          8
</code></pre></div></div>

<p>Again, our “ocular test” shows that this doesn’t handle
<code class="language-plaintext highlighter-rouge">NA</code> values correctly. Look at student <code class="language-plaintext highlighter-rouge">10002</code> in the second row:
while the student doesn’t have an expectation (or said “I don’t
know”), the parent does. However, our new variable records <code class="language-plaintext highlighter-rouge">NA</code>. Let’s
fix it with this test:</p>

<blockquote>
  <p>If <code class="language-plaintext highlighter-rouge">high_expct</code> <strong>is missing</strong> <strong>and</strong> <code class="language-plaintext highlighter-rouge">x1stuedexpct</code> <strong>is not missing</strong>, replace with
that; otherwise replace with itself (leave alone). Repeat, but for
<code class="language-plaintext highlighter-rouge">x1paredexpct</code>. If still <code class="language-plaintext highlighter-rouge">NA</code>, then we can assume both student and
parent expectations were missing.</p>
</blockquote>

<p>Translating the bold words to R code:</p>

<ul>
  <li><strong>is missing</strong>: <code class="language-plaintext highlighter-rouge">is.na()</code></li>
  <li><strong>and</strong>: <code class="language-plaintext highlighter-rouge">&amp;</code></li>
  <li><strong>is not missing</strong>: <code class="language-plaintext highlighter-rouge">!is.na()</code> (<code class="language-plaintext highlighter-rouge">!</code> means <strong>NOT</strong>)</li>
</ul>

<p>we get:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## correct for NA values</span><span class="w">

</span><span class="c1">## NB: We have to include [is.na(df_tmp$high_expct)] each time so that</span><span class="w">
</span><span class="c1">## everything lines up</span><span class="w">

</span><span class="c1">## step 1 student</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="w">
    </span><span class="c1">## test</span><span class="w">
    </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]),</span><span class="w"> 
    </span><span class="c1">## if TRUE do this...</span><span class="w">
    </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)],</span><span class="w">
    </span><span class="c1">## ... else do that</span><span class="w">
    </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="c1">## step 2 parent</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="w">
    </span><span class="c1">## test</span><span class="w">
    </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]),</span><span class="w">
    </span><span class="c1">## if TRUE do this...</span><span class="w">
    </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1paredexpct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)],</span><span class="w">
    </span><span class="c1">## ... else do that</span><span class="w">
    </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>That’s a lot of text! What’s happening is that we are trying to
replace a vector of values with another vector of values, which need
to line up and be the same length. That’s why we have</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## what we'll use to replace when TRUE</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1stuedexpct</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)]</span><span class="w">
</span></code></pre></div></div>

<p>When our <code class="language-plaintext highlighter-rouge">high_expct</code> column has missing values, we want to replace
with non-missing <code class="language-plaintext highlighter-rouge">x1stuedexpct</code> values <em>in the same row</em>. That means
we also need to subset that column to only include values in rows that
have missing <code class="language-plaintext highlighter-rouge">high_expct</code> values. Because we must do this each time,
our script gets pretty long and unwieldy.</p>

<p>Let’s check to make sure it worked as intended.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show first 10 rows</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   stu_id x1stuedexpct x1paredexpct x1region high_expct
1   10001            8            6        2          8
2   10002           NA            6        1          6
3   10003           10           10        4         10
4   10004           10           10        3         10
5   10005            6           10        3         10
6   10006           10            8        3         10
7   10007            8           NA        1          8
8   10008            8            6        1          8
9   10009           NA           NA        3         NA
10  10010            8            6        1          8
</code></pre></div></div>

<p>Looking at the second observation again, it looks like we’ve fixed our
<code class="language-plaintext highlighter-rouge">NA</code> issue. Looking at rows 7 and 9, it seems like those situations
are correctly handled as well.</p>

<h1 id="filter-observations-rows"><strong>Filter</strong> observations (rows)</h1>

<p>Let’s check the counts of our new variable:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## -----------------</span><span class="w">
</span><span class="c1">## filter</span><span class="w">
</span><span class="c1">## -----------------</span><span class="w">

</span><span class="c1">## get summary of our new variable</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   1    2    3    4    5    6    7    8    9   10 &lt;NA&gt; 
  71 2034  163 1282  132 4334  191 5087  168 6578 3463 
</code></pre></div></div>

<p>Since we’re not going to use the missing values (we really can’t, even
if we wanted to do so), we’ll drop those observations from our data
frame.</p>

<p>As when we selected columns above, we’ll use the square brackets
notation. As with dplyr’s <code class="language-plaintext highlighter-rouge">filter()</code>, we want to <em>filter in</em> what we
want. We set this condition before the comma in the square
brackets. Because we want all the columns, we leave the space after
the comma blank.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## filter in values that aren't missing</span><span class="w">
</span><span class="n">df_tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_tmp</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">),]</span><span class="w">

</span><span class="c1">## show first 10 rows</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   stu_id x1stuedexpct x1paredexpct x1region high_expct
1   10001            8            6        2          8
2   10002           NA            6        1          6
3   10003           10           10        4         10
4   10004           10           10        3         10
5   10005            6           10        3         10
6   10006           10            8        3         10
7   10007            8           NA        1          8
8   10008            8            6        1          8
10  10010            8            6        1          8
11  10011            8            6        3          8
</code></pre></div></div>

<p>It looks like we’ve dropped the rows with missing values in our new
variable (or, more technically, <em>kept</em> those without missing
values). Since we haven’t removed rows until now, we can compare the
number of rows in the original data frame, <code class="language-plaintext highlighter-rouge">df</code>, to what we have
now.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## is the original # of rows - current # or rows == NA in count?</span><span class="w">
</span><span class="n">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 3463
</code></pre></div></div>

<p>Comparing the difference, we can see it’s the same as the number of
missing values in our new column. While not a formal test, it does
support what we expected (in other words, if the number were
different, we’d definitely want to go back and investigate).</p>

<h1 id="summarize-data"><strong>Summarize</strong> data</h1>

<p>Now we’re ready to get the average of expectations that we need. For
an overall average, we can just use the <code class="language-plaintext highlighter-rouge">mean()</code> function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## -----------------</span><span class="w">
</span><span class="c1">## summarize</span><span class="w">
</span><span class="c1">## -----------------</span><span class="w">

</span><span class="c1">## get average (without storing)</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 7.272705
</code></pre></div></div>

<p>Overall, we can see that students and parents have high postsecondary
expectations on average: to earn some graduate credential beyond a
bachelor’s degree. However, this isn’t what we want. We want the
values across census regions.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## check our census regions</span><span class="w">
</span><span class="n">table</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1region</span><span class="p">,</span><span class="w"> </span><span class="n">useNA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ifany"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
   1    2    3    4 
3128 5312 8177 3423 
</code></pre></div></div>

<p>We’re not missing any census data, which is good. To calculate our
average expectations, we need to use the <code class="language-plaintext highlighter-rouge">aggregate</code> function. This
function allows to compute a <code class="language-plaintext highlighter-rouge">FUN</code>ction <code class="language-plaintext highlighter-rouge">by</code> a group. We’ll use it to
get our summary.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## get average (assigning this time)</span><span class="w">
</span><span class="n">df_tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">aggregate</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">[</span><span class="s2">"high_expct"</span><span class="p">],</span><span class="w">                </span><span class="c1"># var of interest</span><span class="w">
                    </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_tmp</span><span class="o">$</span><span class="n">x1region</span><span class="p">),</span><span class="w"> </span><span class="c1"># by group</span><span class="w">
                    </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">)</span><span class="w">                          </span><span class="c1"># function to run</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">df_tmp</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  region high_expct
1      1   7.389066
2      2   7.168110
3      3   7.357833
4      4   7.125329
</code></pre></div></div>

<p>Success! Expectations are similar across the country, but not the
same by region.</p>

<h1 id="arrange-data"><strong>Arrange</strong> data</h1>

<p>As our final step, we’ll arrange our data frame from highest to lowest
(descending). For this, we’ll use <code class="language-plaintext highlighter-rouge">sort()</code> and the <code class="language-plaintext highlighter-rouge">decreasing</code> option.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## -----------------</span><span class="w">
</span><span class="c1">## arrange</span><span class="w">
</span><span class="c1">## -----------------</span><span class="w">

</span><span class="c1">## arrange from highest expectations (first row) to lowest</span><span class="w">
</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sort</span><span class="p">(</span><span class="n">df_tmp</span><span class="o">$</span><span class="n">high_expct</span><span class="p">,</span><span class="w"> </span><span class="n">decreasing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">df_tmp</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  region high_expct
1      1   7.389066
2      2   7.357833
3      3   7.168110
4      4   7.125329
</code></pre></div></div>

<h1 id="write-out-updated-data"><strong>Write</strong> out updated data</h1>

<p>We can use this new data frame as a table in its own right or to make
a figure. For now, however, we’ll simply save it using the opposite of
<code class="language-plaintext highlighter-rouge">read.csv()</code> — <code class="language-plaintext highlighter-rouge">write.csv()</code> — which works like <code class="language-plaintext highlighter-rouge">writeRDS()</code> we’ve
used before.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## write with useful name</span><span class="w">
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">,</span><span class="w"> </span><span class="n">file.path</span><span class="p">(</span><span class="n">dat_dir</span><span class="p">,</span><span class="w"> </span><span class="s2">"high_expct_mean_region.csv"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>And with that, we’ve met our task: we can show average educational
expectations by region. To be very precise, we can show the higher of
student and parental educational expectations among those who answered
the question by region. This caveat doesn’t necessarily make our
analysis less useful, but rather sets its scope. Furthermore, we’ve
kept our original data as is (we didn’t overwrite it) for future
analyses while saving the results of this analysis for quick
reference.</p>




	<!-- <p> -->
	<!--   Updated:  -->
	<!-- </p> -->
      </section>
      <footer>
        <p>
  Benjamin Skinner</br>  
  Assistant Professor</br>  
  University of Florida</br>
  <a href="https://www.btskinner.io" class="iconlink" alt="Personal website">
    <i class="fas fa-home fa-lg"></i></a> | 
  <a href="https://github.com/btskinner" class="iconlink" alt="Github
								profile">
    <i class="fab fa-github fa-lg"></i></a> |
  <a href="https://twitter.com/btskinner" class="iconlink" alt="Twitter profile">
    <i class="fab fa-twitter fa-lg"></i></a>
</p>
<p>
  <small>
    <a href="https://pages.github.com">GitHub Pages</a> |
    <a href="https://github.com/orderedlist/minimal">Theme</a> |
    <a href="/edh7916/releases/">Releases</a>
  </small>
</p>

      </footer>
    </div>

    <!-- load Javascript if page requires it -->
    
    
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-63981025-1', 'auto');
        ga('send', 'pageview');
    </script>
  
  </body>
</html>
