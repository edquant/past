<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="/past/edh7916/2022/spring/assets/css/style.css">
<link rel="stylesheet" href="/past/edh7916/2022/spring/assets/css/syntax_default.css">
<link rel="shortcut icon" type="image/png" href="/past/edh7916/2022/spring/assets/img/favicon.ico">
<link crossorigin="anonymous" media="all" integrity="sha512-uhAd27cNiLn0VE2GVEVUN8D5zW0o7s0QTnCGMnJZkL2HqN9/LwHDi4ndTPJH0upUQHYl/8QF6cwbOYp/KIzlJQ==" rel="stylesheet" href="https://github.githubassets.com/assets/github-be4e45349cf088df7a6636f437c0a167.css" />
<script defer src="/past/edh7916/2022/spring/assets/js/all.min.js"></script>
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<title>edquant | EDH 7916: Contemporary Research in Higher Education</title>

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>EDH 7916: Contemporary Research in Higher Education<a href="https://github.com/edquant/past/edh7916/2022/spring" class="iconlink">
	      <i class="fab fa-github fa-sm"></i></a></h1>
	<h2 class="thin">Spring 2023</h2>
	<p>A course in quantitative research workflow for students in
the higher education administration program at the University of Florida
</p>
	<!-- side / top bar menu -->
	<h2 class="thin">
	  <a href="/past/edh7916/2022/spring/">Overview</a></br>
	  <a href="/past/edh7916/2022/spring/syllabus/">Course information</a></br>
	  <a href="/past/edh7916/2022/spring/location/">Meeting location</a></br>
	  <a href="/past/edh7916/2022/spring/software/">Software</a></br>
	  <a href="/past/edh7916/2022/spring/schedule/">Schedule</a></br>
	  <a href="/past/edh7916/2022/spring/lessons/">Lessons</a></br>
	  <a href="/past/edh7916/2022/spring/assignments/">Assignments</a></br>
	  <a href="/past/edh7916/2022/spring/questions/">Questions</a></br>
	  <a href="/past/edh7916/2022/spring/past/">Past courses</a></br>
	  <a href="/past/edh7916/2022/spring/about/">About</a></br>	  
	</h2>
      </header>

      <section>
	<h1>Interactive graphics</h1>
	

	
<p>
  
  <a href="/past/edh7916/2022/spring/assets/pdf/interactive.pdf"
     class="iconlink" download title="Get PDF of lesson">
  <i class="far fa-file-pdf fa-2x"></i>
  </a>
  
  &nbsp;&nbsp;
  
  <a href="/past/edh7916/2022/spring/scripts/interactive.R"
     class="iconlink" download title="Get script">
    <i class="fas fa-code fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
  
  
  
  
  <a href="/past/edh7916/2022/spring/data/hsls_small.dta"
     class="iconlink" download title="Get data">
    <i class="fas fa-database fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
  <a href="/past/edh7916/2022/spring/data/sch_test.zip"
     class="iconlink" download title="Get data">
    <i class="fas fa-database fa-2x"></i>
  </a>
  &nbsp;&nbsp;
  
  
</p>


<p>In this supplemental lesson, we’ll make a few interactive plots using
the <a href="https://plotly.com/r/">plotly</a> library. Why might you want to
make interactive plots? Aside from the fact that they are very cool,
they can help you make a stronger data presentation.</p>

<p>How so?</p>

<p>First, the <em>wow!</em> factor of interactive plots can bring people
in. Rather than passively reading a report or watching you present
your findings, your audience can actively participate in their own
understanding. Even if your interactive plot isn’t any special, the
process of a person using/”playing” with it means you’ve got their
attention, at least for a moment. A well designed plot, like a
well-designed interactive exhibit at a museum, can use that attention
to instruct.</p>

<p>Second, interactive features allow you to plot along new
dimensions. With a static 2D graph, we start hitting a wall at about 4
dimensions at once: x-axis, y-axis, color/shape, small multiples,
<em>etc</em>. If we are smart about it, we can fit <em>a lot</em> of information
into one figure, but it’s difficult. With interactive features, we can
add a 3rd dimension, dynamic visuals that change over time, tooltips
to show point-specific information, and buttons that allow the user to
change the underlying data. Interactive graphics can allow for more
options since they can be changed on the fly.</p>

<p>The good news is that plotly in R works very similarly to ggplot. In
fact, it’s often trivial to convert a static ggplot figure into an
interactive plotly figure. In this lesson, however, I’ll show you how
to use plotly’s particular interface, which is a little different.</p>

<p>As a note, most of what I’m showing you here is just code from <a href="https://plotly.com/r/">the R
plotly website</a> that I’ve modified to replicate
some figures we’ve made before. As usual, what I’m showing you only
scratches the surface of what’s possible. If you want to make
different types of interactive figures or modify what you see here,
check out the plotly web page: <a href="https://plotly.com/r/">plotly.com/r/</a>.</p>

<p><strong>NOTE</strong> I’ve included a PDF link at the top of this page as always,
but interactive plots don’t play well with PDFs so you won’t see the
figures there. Be sure to run the code in RStudio or use the website
to see the interactive figures.</p>

<h1 id="setup">Setup</h1>

<p>Unless you have already done so, don’t forget to install plotly
library using <code class="language-plaintext highlighter-rouge">install.packages("plotly")</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## libraries</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## ✔ ggplot2 3.3.5     ✔ purrr   0.3.4
## ✔ tibble  3.1.6     ✔ dplyr   1.0.8
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">haven</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
## Attaching package: 'plotly'
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## The following object is masked from 'package:ggplot2':
## 
##     last_plot
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## The following object is masked from 'package:stats':
## 
##     filter
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## The following object is masked from 'package:graphics':
## 
##     layout
</code></pre></div></div>

<p>As we did with the <a href="../lessons/plotting.html">the lesson on making
graphics</a>, we’ll use two sets of data:
<code class="language-plaintext highlighter-rouge">hsls_small.dta</code> and <code class="language-plaintext highlighter-rouge">all_schools.csv</code>.</p>

<p><strong>Note</strong> that since we have two data files this lesson, we’ll give
them unique names instead of the normal <code class="language-plaintext highlighter-rouge">df</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">df_hs</code> := <code class="language-plaintext highlighter-rouge">hsls_small.dta</code></li>
  <li><code class="language-plaintext highlighter-rouge">df_ts</code> := <code class="language-plaintext highlighter-rouge">all_schools.csv</code></li>
</ul>

<p>And as always, we are working in the <code class="language-plaintext highlighter-rouge">./scripts</code> subdirectory.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## directory paths</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="c1">## assume we're running this script from the ./scripts subdirectory</span><span class="w">
</span><span class="n">dat_dir</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">file.path</span><span class="p">(</span><span class="s2">".."</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="p">)</span><span class="w">
</span><span class="n">tsc_dir</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">file.path</span><span class="p">(</span><span class="n">dat_dir</span><span class="p">,</span><span class="w"> </span><span class="s2">"sch_test"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## ---------------------------</span><span class="w">
</span><span class="c1">## input data</span><span class="w">
</span><span class="c1">## ---------------------------</span><span class="w">

</span><span class="c1">## assume we're running this script from the ./scripts subdirectory</span><span class="w">
</span><span class="c1">## read_dta() ==&gt; read in Stata (*.dta) files</span><span class="w">
</span><span class="c1">## read_csv() ==&gt; read in comma separated value (*.csv) files</span><span class="w">
</span><span class="n">df_hs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_dta</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">dat_dir</span><span class="p">,</span><span class="w"> </span><span class="s2">"hsls_small.dta"</span><span class="p">))</span><span class="w">
</span><span class="n">df_ts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">tsc_dir</span><span class="p">,</span><span class="w"> </span><span class="s2">"all_schools.csv"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Rows: 24 Columns: 5
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (1): school
## dbl (4): year, math, read, science
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
</code></pre></div></div>

<h1 id="plots-using-plotly">Plots using plotly</h1>

<p>Pretty much whatever plot you can make in ggplot(), you can make using
plotly. We’ll start with histograms to get our bearings.</p>

<h2 id="histogram">Histogram</h2>

<p>Just like ggplot starts with the function <code class="language-plaintext highlighter-rouge">ggplot()</code>, plotly starts
with <code class="language-plaintext highlighter-rouge">plot_ly()</code> (notice the underscore in the function name). Like
you have seen with <code class="language-plaintext highlighter-rouge">ggplot()</code>, <code class="language-plaintext highlighter-rouge">plot_ly()</code> starts with the data you want
to use.</p>

<p>Unlike <code class="language-plaintext highlighter-rouge">ggplot()</code>, you don’t use an aesthetics—<code class="language-plaintext highlighter-rouge">aes()</code>—function to
map the data to axes. Instead, you set the values directly, but use a
tilde (<code class="language-plaintext highlighter-rouge">~</code>) next to the variable name. Think of the tilde as saying,
<em>I want this variable to be interactive in some way</em>. For our first
histogram, we’re going to plot the distribution of math test scores:
<code class="language-plaintext highlighter-rouge">~x1txmtscor</code>.</p>

<p>Also unlike ggplot(), we set the figure type (geom in ggplot-speak)
inside the <code class="language-plaintext highlighter-rouge">plot_ly()</code> function using the argument <code class="language-plaintext highlighter-rouge">type</code>. In this
case, <code class="language-plaintext highlighter-rouge">type = "histogram"</code>).</p>

<p>We could just call <code class="language-plaintext highlighter-rouge">plot_ly()</code> and let the plot pull up in our plot
window, but we’ll first save it in an object, <code class="language-plaintext highlighter-rouge">p</code>. We’ll then call
<code class="language-plaintext highlighter-rouge">p</code>.</p>

<p>One thing to notice about plotly figures is that they are <code class="language-plaintext highlighter-rouge">*.html</code>
files by default. This is the markup language for websites
(<strong>H</strong>yper <strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage). If you are using
RStudio, the plot should pull up in your plot viewer. Outside of
RStudio, it will open you in your web browser.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create basic histogram with plotly</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"histogram"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_hist_1.html"></iframe>
<!--/html_preserve-->
<p>This first histogram is pretty plain, but run your mouse over it. You
should notice a tooltip next to your mouse. There are
two numbers. These represent the x-axis range of the histogram bin and
the number of observations falling into that bin (y-axis). So if you
see, <code class="language-plaintext highlighter-rouge">(49.5 - 50, 571)</code>, that’s telling you that 571 observations have
test scores within 49.5 and 50. With ggplot(), we don’t get that level
of detail.</p>

<p>You should also see a number of controls on the upper part of the
figure. These allow you to zoom in and and save the figure. If you
click and drag on the figure, you can zoom in on a certain
region. Take a few moments to play around with the figure and
controls.</p>

<p>If we want to show a density histogram rather than a frequency
histogram, we only need to add the option <code class="language-plaintext highlighter-rouge">histnorm = "probability"</code>
as an argument. All else can stay the same.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create histogram plotly</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">histnorm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"probability"</span><span class="p">,</span><span class="w">
             </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"histogram"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_hist_norm.html"></iframe>
<!--/html_preserve-->

<p>Notice that the y-axis is now on the probability scale. Similarly, the
tooltip now shows the probability of the bin rather than the count of
observations that fall into it.</p>

<blockquote>
  <h4 id="quick-exercise">QUICK EXERCISE</h4>
  <p>Create an interactive histogram using another continuous variable in
the <code class="language-plaintext highlighter-rouge">hsls_small</code> data set. You can make either a frequency or
density histogram.</p>
</blockquote>

<p>Now that we’ve made a couple, let’s make a nicer looking
histogram. First, within the <code class="language-plaintext highlighter-rouge">plot_ly()</code> function, we’ll add the
argument <code class="language-plaintext highlighter-rouge">marker</code> and some options to make our histogram bars look a
little different. One thing to notice about plotly options is that
they tend to fall into lists. This is likely due to the fact that
plotly works with other programming languages like Python and is
splitting the difference between idioms. With <code class="language-plaintext highlighter-rouge">marker</code> we add two
named list items: <code class="language-plaintext highlighter-rouge">color</code> and <code class="language-plaintext highlighter-rouge">line</code>, which also takes a list. With
these options, we can change the fill (inside) color of the bars and
edge color and line thickness.</p>

<p>Next, we add nicer labels using the <code class="language-plaintext highlighter-rouge">layout()</code> function. Notice that
unlike ggplot, which connects items with a plus (<code class="language-plaintext highlighter-rouge">+</code>) sign, plotly
uses the magrittr pipe (<code class="language-plaintext highlighter-rouge">%&gt;%</code>). Inside <code class="language-plaintext highlighter-rouge">layout()</code>, we set the overall
title and the x-axis label (which also use the <code class="language-plaintext highlighter-rouge">title</code> name).</p>

<p>Finally, we improve the tooltip. With argument <code class="language-plaintext highlighter-rouge">hovertemplate</code> we
<code class="language-plaintext highlighter-rouge">paste()</code> together a new string. Anything static in the string, like
<code class="language-plaintext highlighter-rouge">"Bin width:"</code> will stay static in the tooltip. So the values for bin
width and probability change, we include the variables inside
<code class="language-plaintext highlighter-rouge">%{&lt;var&gt;}</code>. For example, notice that next to <code class="language-plaintext highlighter-rouge">"Bin width: "</code> we
include <code class="language-plaintext highlighter-rouge">%{x}</code>. This means that that value should change along values
of <code class="language-plaintext highlighter-rouge">x</code>, our test score. It’s a little tricky here since we don’t
actually have a <code class="language-plaintext highlighter-rouge">y</code> value that we set explicitly. That said, we know
that <code class="language-plaintext highlighter-rouge">y</code> is probability in this histogram. So that we don’t have a
redundant name on our tooltip, we set <code class="language-plaintext highlighter-rouge">name = ""</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create histogram plotly w/</span><span class="w">
</span><span class="c1">## 1. better labels</span><span class="w">
</span><span class="c1">## 2. add title</span><span class="w">
</span><span class="c1">## 3. change color of bars</span><span class="w">
</span><span class="c1">## 4. add outline to bars</span><span class="w">
</span><span class="c1">## 5. improve the tooltip</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">histnorm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"probability"</span><span class="p">,</span><span class="w">
             </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"histogram"</span><span class="p">,</span><span class="w">
             </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#E28F41"</span><span class="p">,</span><span class="w">
                           </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#6C9AC3"</span><span class="p">,</span><span class="w">
                                       </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span><span class="w">
             </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"Bin width: %{x}"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w"> </span><span class="c1"># add HTML &lt;br&gt; for line break</span><span class="w">
                                   </span><span class="s2">"Probability: %{y}"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Distribution of math test scores"</span><span class="p">,</span><span class="w">
           </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math test score"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_hist_lab.html"></iframe>
<!--/html_preserve-->

<p>That’s much nicer looking! Notice how much nicer and more user
friendly the tooltip is now, too.</p>

<h3 id="two-way-histogram">Two-way histogram</h3>

<p>Plotting the difference in a continuous distribution across groups is
a common task. As we’ve done before, let’s see the difference between
student math scores between students with parents who have any
postsecondary degree and those without. Since we’re using data that
was labeled in Stata, we’ll see the labels when we use <code class="language-plaintext highlighter-rouge">count()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## see the counts for each group</span><span class="w">
</span><span class="n">df_hs</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">x1paredu</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 7 × 2
##                                       x1paredu     n
##                                      &lt;dbl+lbl&gt; &lt;int&gt;
## 1  1 [Less than high school]                    1010
## 2  2 [High school diploma or GED]               5909
## 3  3 [Associate's degree]                       2549
## 4  4 [Bachelor's degree]                        4102
## 5  5 [Master's degree]                          2116
## 6  7 [Ph.D/M.D/Law/other high lvl prof degree]  1096
## 7 NA                                            6721
</code></pre></div></div>

<p>Now that we see our options, we’ll make a new variable, <code class="language-plaintext highlighter-rouge">pared_coll</code>
that equals 1 if either of the student’s parents have any college
degree and 0 otherwise. We’ll store this smaller data frame in a new
object, <code class="language-plaintext highlighter-rouge">plot_df</code>, that we’ll us to plot a new two-way histogram.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## need to set up data</span><span class="w">
</span><span class="n">plot_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_hs</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## select the columns we need</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="n">x1paredu</span><span class="p">,</span><span class="w"> </span><span class="n">x1txmtscor</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## can't plot NA so will drop</span><span class="w">
  </span><span class="n">drop_na</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## create new variable that == 1 if parents have any college</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">pared_coll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">x1paredu</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## drop (using negative sign) the original variable we don't need now</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">x1paredu</span><span class="p">)</span><span class="w"> 

</span><span class="c1">## show</span><span class="w">
</span><span class="n">plot_df</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 16,429 × 2
##    x1txmtscor pared_coll
##     &lt;dbl+lbl&gt;      &lt;dbl&gt;
##  1       59.4          1
##  2       47.7          1
##  3       64.2          1
##  4       49.3          1
##  5       62.6          1
##  6       58.1          1
##  7       49.5          0
##  8       54.6          1
##  9       53.2          0
## 10       63.8          1
## # … with 16,419 more rows
</code></pre></div></div>

<p>Unlike with ggplot, we won’t just add a <code class="language-plaintext highlighter-rouge">group = ...</code> aesthetic to the
plot. Instead, we’ll add two separate histograms, one for each
<code class="language-plaintext highlighter-rouge">pared_coll</code> group and then tell plotly to <code class="language-plaintext highlighter-rouge">barmode = "overlay"</code> in
the <code class="language-plaintext highlighter-rouge">layout()</code> function. To only plot one <code class="language-plaintext highlighter-rouge">pared_coll</code> group at a
time, notice that we use <code class="language-plaintext highlighter-rouge">plot_df %&gt;% filter(pared_coll == ...)</code> in
each data argument, replacing <code class="language-plaintext highlighter-rouge">...</code> with <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code>.</p>

<p>We include <code class="language-plaintext highlighter-rouge">hovertemplate</code> arguments in each <code class="language-plaintext highlighter-rouge">add_histogram()</code>
function. We also include redundant <code class="language-plaintext highlighter-rouge">text</code> and <code class="language-plaintext highlighter-rouge">name</code> arguments. With
the <code class="language-plaintext highlighter-rouge">text</code> argument, we can include the <code class="language-plaintext highlighter-rouge">pared_coll</code> status in the
tooltip with <code class="language-plaintext highlighter-rouge">%{text}</code>. With <code class="language-plaintext highlighter-rouge">name</code>, the legend will be properly
labeled. However, adding <code class="language-plaintext highlighter-rouge">name</code> back in means that we get that
annoying extra label on our tooltip. To remove it, we add
<code class="language-plaintext highlighter-rouge">"&lt;extra&gt;&lt;/extra&gt;"</code> at the end of our <code class="language-plaintext highlighter-rouge">hovertemplate</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## two way histogram: add one at a time</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## first: when parents don't have college degree</span><span class="w">
  </span><span class="n">add_histogram</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">pared_coll</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w">
                </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
                </span><span class="n">histnorm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"probability"</span><span class="p">,</span><span class="w">
                </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"histogram"</span><span class="p">,</span><span class="w">
                </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"No college"</span><span class="p">,</span><span class="w">
                </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"No college"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"Bin width: %{x}"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"Probability: %{y}"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;extra&gt;&lt;/extra&gt;"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## second: when parents have college degree</span><span class="w">
  </span><span class="n">add_histogram</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">pared_coll</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
                </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
                </span><span class="n">histnorm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"probability"</span><span class="p">,</span><span class="w">
                </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"histogram"</span><span class="p">,</span><span class="w">
                </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Some college or more"</span><span class="p">,</span><span class="w">
                </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"Some college or more"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"Bin width: %{x}"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"Probability: %{y}"</span><span class="p">,</span><span class="w">
                                      </span><span class="s2">"&lt;extra&gt;&lt;/extra&gt;"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## tell plotly to overlay the histograms</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">barmode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"overlay"</span><span class="p">,</span><span class="w">
         </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Distribution of math test scores"</span><span class="p">,</span><span class="w">
         </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math test score"</span><span class="p">),</span><span class="w">
         </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Parent's education level"</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_hist_double.html"></iframe>
<!--/html_preserve-->

<blockquote>
  <h4 id="quick-exercise-1">QUICK EXERCISE</h4>
  <p>Create an interactive two-way histogram using another grouping variable in
the <code class="language-plaintext highlighter-rouge">hsls_small</code> data set (something other than parental
college). You can use an existing indicator variable or create your
own.</p>
</blockquote>

<h2 id="box-plot">Box plot</h2>

<p>Here we’ll replicate the box plot that we’ve made before. Since the
xaxis boxes and the different colors represent the same things—a
different level of parental educational expectation—we’ll turn off
the legend with <code class="language-plaintext highlighter-rouge">showlegend = FALSE</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## box plot using as_factor()</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs</span><span class="p">,</span><span class="w">
             </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">as_factor</span><span class="p">(</span><span class="n">x1paredu</span><span class="p">),</span><span class="w">
             </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"box"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math score by parental expectations"</span><span class="p">,</span><span class="w">
         </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Parental expectations"</span><span class="p">),</span><span class="w">
         </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math score"</span><span class="p">),</span><span class="w">
         </span><span class="n">showlegend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_box.html"></iframe>
<!--/html_preserve-->

<p>Nothing too fancy here. Our factor labels are a bit long, so we could
probably make a cleaner figure if shortened them. The biggest benefit
of the interactive boxplot is that the tooltip shows the values of the
various levels: <code class="language-plaintext highlighter-rouge">min</code>, <code class="language-plaintext highlighter-rouge">lower fence</code>, <code class="language-plaintext highlighter-rouge">Q1</code>, <code class="language-plaintext highlighter-rouge">median</code>, <code class="language-plaintext highlighter-rouge">Q3</code>, <code class="language-plaintext highlighter-rouge">upper
fence</code>, and <code class="language-plaintext highlighter-rouge">max</code>. That said, it’s a bit busy, so you’ll have to
decide whether the benefit outweighs the cost.</p>

<h1 id="scatter">Scatter</h1>

<p>Interactive scatter plots can be really useful if for no other reason
than they allow you to zoom in and pick out specific values, which is
great for identifying outliers.</p>

<p>As with a prior lesson, we’ll limit our data to only a 10%
sample. Remember that because it’s a random process, your data and
resulting figures will look a little different from mine.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## sample 10% to make figure clearer</span><span class="w">
</span><span class="n">df_hs_10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_hs</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="c1">## drop observations with missing values for x1stuedexpct</span><span class="w">
    </span><span class="n">drop_na</span><span class="p">(</span><span class="n">x1stuedexpct</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="c1">## sample</span><span class="w">
    </span><span class="n">sample_frac</span><span class="p">(</span><span class="m">0.1</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>To make the scatter plot, we’ll start by setting <code class="language-plaintext highlighter-rouge">type = "scatter"</code>
and <code class="language-plaintext highlighter-rouge">mode = "markers"</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## scatter</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs_10</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1ses</span><span class="p">,</span><span class="w">
             </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
             </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"markers"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_scatter_1.html"></iframe>
<!--/html_preserve-->

<p>Like the other plotly figures, we can hover over specific points to
get their values. Let’s do another version, but cleaned up: better
axes, better tooltip, and better colors. One new thing: we set
<code class="language-plaintext highlighter-rouge">zeroline = FALSE</code> in the <code class="language-plaintext highlighter-rouge">layout()</code> function. This prevents the
figure from drawing a bold vertical line at 0. You can remove the
option and have the bold line if you want, but it seemed unnecessary
here so I’ve dropped it.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## scatter</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs_10</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1ses</span><span class="p">,</span><span class="w">
             </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
             </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"markers"</span><span class="p">,</span><span class="w">
             </span><span class="c1">## set point options</span><span class="w">
             </span><span class="c1">## size: radius</span><span class="w">
             </span><span class="c1">## color: fill color</span><span class="w">
             </span><span class="c1">## line: circumference line width and color</span><span class="w">
             </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w">
                           </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#E28F41"</span><span class="p">,</span><span class="w">
                           </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#6C9AC3"</span><span class="p">,</span><span class="w">
                                       </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span><span class="w">
             </span><span class="c1">## turn off side name on hover</span><span class="w">
             </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"SES: %{x}"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w"> </span><span class="c1"># add &lt;br&gt; for line break</span><span class="w">
                                   </span><span class="s2">"Math: %{y}"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math scores as function of SES"</span><span class="p">,</span><span class="w">
         </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SES"</span><span class="p">,</span><span class="w">
                      </span><span class="n">zeroline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">),</span><span class="w">
         </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math score"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_scatter_2.html"></iframe>
<!--/html_preserve-->

<p>Let’s add another dimension: color representing whether the student
planned to graduate from college or not. First, we’ll check the levels
of our key variable, <code class="language-plaintext highlighter-rouge">x1stuedexpct</code>).</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## see student base year plans</span><span class="w">
</span><span class="n">df_hs</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">count</span><span class="p">(</span><span class="n">x1stuedexpct</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 12 × 2
##                                    x1stuedexpct     n
##                                       &lt;dbl+lbl&gt; &lt;int&gt;
##  1  1 [Less than high school]                      93
##  2  2 [High school diploma or GED]               2619
##  3  3 [Start an Associate's degree]               140
##  4  4 [Complete an Associate's degree]           1195
##  5  5 [Start a Bachelor's degree]                 115
##  6  6 [Complete a Bachelor's degree]             3505
##  7  7 [Start a Master's degree]                   231
##  8  8 [Complete a Master's degree]               4278
##  9  9 [Start Ph.D/M.D/Law/other prof degree]      176
## 10 10 [Complete Ph.D/M.D/Law/other prof degree]  4461
## 11 11 [Don't know]                               4631
## 12 NA                                            2059
</code></pre></div></div>

<p>We see that <code class="language-plaintext highlighter-rouge">x1stuedexpct &gt;= 6</code> means a student plans to earn a
Bachelor’s degree or higher. But since we need to account for the fact
that 11 means “I don’t know”, we need to make sure our test includes
<code class="language-plaintext highlighter-rouge">x1stuedexpct &lt; 11</code>. Remember from a prior lesson that we can connect
these two statements together with the operator <code class="language-plaintext highlighter-rouge">&amp;</code>. Let’s create our
new variable.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create variable for students who plan to graduate from college</span><span class="w">
</span><span class="n">df_hs_10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_hs_10</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">plan_col_grad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x1stuedexpct</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">11</span><span class="p">,</span><span class="w">
                                </span><span class="s2">"Yes"</span><span class="p">,</span><span class="w">        </span><span class="c1"># if T: "Yes"</span><span class="w">
                                </span><span class="s2">"No"</span><span class="p">))</span><span class="w">        </span><span class="c1"># if F: "No"</span><span class="w">
</span></code></pre></div></div>

<p>Now that we have our new variable <code class="language-plaintext highlighter-rouge">plan_col_grad</code>, we can add it the
<code class="language-plaintext highlighter-rouge">color</code> aesthetic. How do we specify the colors? Notice that we
created an object called <code class="language-plaintext highlighter-rouge">pal</code> with two Hex color codes. In the next
line, we named these colors in the vector with “Yes” and “No” to match
our new <code class="language-plaintext highlighter-rouge">plan_col_grad</code> variable. We add this to the <code class="language-plaintext highlighter-rouge">colors</code>
argument. That will assign the first color in pal to all the <code class="language-plaintext highlighter-rouge">Yes</code>s and
the second color in pal to all the <code class="language-plaintext highlighter-rouge">No</code>s.</p>

<p>This time, we’re also making our scatterplot a little
differently. We’re using <code class="language-plaintext highlighter-rouge">add_trace()</code> this time. Most of the
arguments are the same as before, but are in the <code class="language-plaintext highlighter-rouge">add_trace()</code>
function rather than in the <code class="language-plaintext highlighter-rouge">plot_ly()</code> function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## set color palette with names</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#E28F41"</span><span class="p">,</span><span class="s2">"#6C9AC3"</span><span class="p">)</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">setNames</span><span class="p">(</span><span class="n">pal</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Yes"</span><span class="p">,</span><span class="w"> </span><span class="s2">"No"</span><span class="p">))</span><span class="w">

</span><span class="c1">## scatter plot</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_trace</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs_10</span><span class="p">,</span><span class="w">
            </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1ses</span><span class="p">,</span><span class="w">
            </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
            </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">plan_col_grad</span><span class="p">,</span><span class="w">   </span><span class="c1"># color changes by college plans</span><span class="w">
            </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">,</span><span class="w">             </span><span class="c1"># using pal from above</span><span class="w">
            </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
            </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"markers"</span><span class="p">,</span><span class="w">
            </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"SES: %{x}"</span><span class="p">,</span><span class="w">
                                  </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                  </span><span class="s2">"Math: %{y}"</span><span class="p">,</span><span class="w">
                                  </span><span class="s2">"&lt;extra&gt;&lt;/extra&gt;"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math scores as function of SES"</span><span class="p">,</span><span class="w">
         </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SES"</span><span class="p">,</span><span class="w">
                      </span><span class="n">zeroline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">),</span><span class="w"> </span><span class="c1"># turn off bold zero line</span><span class="w">
         </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math score"</span><span class="p">),</span><span class="w">
         </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Plans to graduate from college?"</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_scatter_group.html"></iframe>
<!--/html_preserve-->

<p>There’s quite a bit of overlap, but we can see that students who plan
to graduate from college tend to have a higher SES and math scores.</p>

<h3 id="3d">3D</h3>

<p>Let’s take full advantage of plotly and make a 3D plot. It would be
ideal if we had a third continuous variable to plot against, but with
our limited data set, we’ll settle for the number of months between HS
graduation and first college enrollment on the <em>z</em> axis.</p>

<p>To add the third dimension repeats most of the same code. We’re back
using <code class="language-plaintext highlighter-rouge">plot_ly()</code> for most of the set up, adding <code class="language-plaintext highlighter-rouge">z = ~x4hs2psmos</code> and
a new line to our tooltip. We call the points with the <code class="language-plaintext highlighter-rouge">add_markers()</code>
function.</p>

<p>Labeling the axes is slightly different. For a 3D plot, all the x, y,
and z-axis labels need to go inside the <code class="language-plaintext highlighter-rouge">scene</code> argument list. But
other than that, the labels are the same.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## set color palette with names</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"#E28F41"</span><span class="p">,</span><span class="s2">"#6C9AC3"</span><span class="p">)</span><span class="w">
</span><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">setNames</span><span class="p">(</span><span class="n">pal</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Yes"</span><span class="p">,</span><span class="w"> </span><span class="s2">"No"</span><span class="p">))</span><span class="w">

</span><span class="c1">## scatter along three dimensions; most settings inside plot_ly() function now</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_hs_10</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1ses</span><span class="p">,</span><span class="w">
             </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x1txmtscor</span><span class="p">,</span><span class="w">
             </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x4hs2psmos</span><span class="p">,</span><span class="w">
             </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">plan_col_grad</span><span class="p">,</span><span class="w">
             </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">,</span><span class="w">
             </span><span class="c1">## add extra row to tool tip</span><span class="w">
             </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"SES: %{x}"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w"> 
                                   </span><span class="s2">"Math: %{y}"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"HS to College: %{z} months"</span><span class="p">,</span><span class="w">
                                   </span><span class="s2">"&lt;extra&gt;&lt;/extra&gt;"</span><span class="p">),</span><span class="w">
             </span><span class="c1">## make marker a little smaller</span><span class="w">
             </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## now tell plot_ly to add points as markers</span><span class="w">
  </span><span class="n">add_markers</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## in 3D, set axis titles inside scene() argument</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math scores as function of SES"</span><span class="p">,</span><span class="w">
         </span><span class="n">scene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SES"</span><span class="p">),</span><span class="w">
                      </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math score"</span><span class="p">),</span><span class="w">
                      </span><span class="n">zaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Months between HS and college"</span><span class="p">)),</span><span class="w">
         </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Plans to graduate from college?"</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_scatter_group_3d.html"></iframe>
<!--/html_preserve-->
<p>Click on the figure and move it around. You’ll see that in addition to
zooming in and out, you can rotate the figure to better see the
relationship across the three variables. For this particular example,
the relationship is difficult to see (3D figures aren’t always the
best option!). Most students who enrolled in college did so pretty
soon after graduating high school. Just by looking, there doesn’t seem
to be much difference between the two groups (though some more formal
testing might be in order).</p>

<blockquote>
  <h4 id="quick-exercise-2">QUICK EXERCISE</h4>
  <p>Create an interactive 3D scatter plot using SES, math scores, and a
categorical variable with more than two groups. This means your
legend should more than two items and your graph should have more
than two colors. Note that you likely need to increase the number of
colors in <code class="language-plaintext highlighter-rouge">pal</code> (you can find more hex codes at
<a href="https://htmlcolorcodes.com">https://htmlcolorcodes.com</a>) or remove
the argument altogether.</p>
</blockquote>

<h2 id="line-graph">Line graph</h2>

<p>We can also make line graphs with plotly. For these, we’ll once again
use our school test score data. We won’t go through all the iterations
in the first graphing lesson, but know that you can convert those to
interactive figures as well.</p>

<p>We’ll begin by showing our data (which is wide-ish) and creating a
fully long version of the data.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show test score data</span><span class="w">
</span><span class="n">df_ts</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 24 × 5
##    school        year  math  read science
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 Bend Gate     1980   515   281     808
##  2 Bend Gate     1981   503   312     814
##  3 Bend Gate     1982   514   316     816
##  4 Bend Gate     1983   491   276     793
##  5 Bend Gate     1984   502   310     788
##  6 Bend Gate     1985   488   280     789
##  7 East Heights  1980   501   318     782
##  8 East Heights  1981   487   323     813
##  9 East Heights  1982   496   294     818
## 10 East Heights  1983   497   306     795
## # … with 14 more rows
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## reshape data long (as we've done in a prior lesson)</span><span class="w">
</span><span class="n">df_ts_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_ts</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">pivot_longer</span><span class="p">(</span><span class="n">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"math"</span><span class="p">,</span><span class="s2">"read"</span><span class="p">,</span><span class="s2">"science"</span><span class="p">),</span><span class="w"> </span><span class="c1"># cols to pivot long</span><span class="w">
               </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">                 </span><span class="c1"># where col names go</span><span class="w">
               </span><span class="n">values_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"score"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">           </span><span class="c1"># where col values go</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">score_std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">score</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">score</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="n">school</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">arrange</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">score_year_one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="w">
         </span><span class="c1">## note that we're using score_year_one instead of mean(score)</span><span class="w">
         </span><span class="n">score_std_sch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">score_year_one</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">score</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ungroup</span><span class="w">

</span><span class="c1">## show</span><span class="w">
</span><span class="n">df_ts_long</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 72 × 7
##    school        year test    score score_std score_year_one score_std_sch
##    &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;
##  1 Bend Gate     1980 math      515     1.40             515             0
##  2 Bend Gate     1980 read      281    -0.863            281             0
##  3 Bend Gate     1980 science   808     0.759            808             0
##  4 East Heights  1980 math      501     0.115            501             0
##  5 East Heights  1980 read      318     1.34             318             0
##  6 East Heights  1980 science   782    -0.735            782             0
##  7 Niagara       1980 math      514     1.31             514             0
##  8 Niagara       1980 read      292    -0.208            292             0
##  9 Niagara       1980 science   787    -0.448            787             0
## 10 Spottsville   1980 math      498    -0.161            498             0
## # … with 62 more rows
</code></pre></div></div>

<p>First, we’ll only plot one school, Bend Gate. As we did above, we
won’t add a grouping argument for each test. Instead, we’ll add a
unique <code class="language-plaintext highlighter-rouge">add_trace()</code> for each test—math, reading, and
science—which are added to the <code class="language-plaintext highlighter-rouge">y</code> argument. In the first
<code class="language-plaintext highlighter-rouge">add_trace()</code>, we’ll include our wide data and <code class="language-plaintext highlighter-rouge">filter(school == "Bend
Gate")</code>. We don’t need to include data in the other functions since it
will be included by default. We set <code class="language-plaintext highlighter-rouge">type = "scatter"</code> and <code class="language-plaintext highlighter-rouge">mode =
"lines"</code> to make our line graphs with <code class="language-plaintext highlighter-rouge">x = ~year</code>. Finally, we add the
argument <code class="language-plaintext highlighter-rouge">hovermode = "x unified"</code> to the <code class="language-plaintext highlighter-rouge">layout()</code> function, which
connects our line information in the tooltip.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## scatter plot</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## add data for Bend Gate only; y == math</span><span class="w">
  </span><span class="n">add_trace</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_ts</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">school</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Bend Gate"</span><span class="p">),</span><span class="w">
            </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
            </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">math</span><span class="p">,</span><span class="w">
            </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Math"</span><span class="p">,</span><span class="w">
            </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
            </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lines"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## repeated, but this time y == reading</span><span class="w">
  </span><span class="n">add_trace</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
            </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">read</span><span class="p">,</span><span class="w">
            </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Reading"</span><span class="p">,</span><span class="w">
            </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
            </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lines"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## repeated, but this time y == science</span><span class="w">
  </span><span class="n">add_trace</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
            </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">science</span><span class="p">,</span><span class="w">
            </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Science"</span><span class="p">,</span><span class="w">
            </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
            </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lines"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="c1">## add unified hovermode so that tooltip for all test scores pops ups</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test scores at Bend Gate: 1980 - 1985"</span><span class="p">,</span><span class="w">
         </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">),</span><span class="w">
         </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Score"</span><span class="p">),</span><span class="w">
         </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test"</span><span class="p">)),</span><span class="w">
         </span><span class="n">hovermode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"x unified"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_scatter_line.html"></iframe>
<!--/html_preserve-->

<p>Notice how the tooltip includes information for all tests in the same
year, no matter which line you hover over? That’s due to the
<code class="language-plaintext highlighter-rouge">hovermode = "x unified"</code> argument. You can omit that argument and the
tooltip will work as normal (local to the point under your mouse
pointer), but in this case, it makes sense to link them.</p>

<p>How to add all the school values in one plot like we did with ggplot’s
<code class="language-plaintext highlighter-rouge">facet_wrap()</code>? It’s a little trickier, but we can do it with a loop
(see the <a href="../lessons/programming.html">lesson on functional
programming</a> for a review of loops).</p>

<p>First, we’ll store our school names in an object, <code class="language-plaintext highlighter-rouge">schools</code>. Next,
we’ll initialize a blank list with <code class="language-plaintext highlighter-rouge">plot_list &lt;- list()</code> that will
store our school-specific plots. Inside the loop, we’ll filter the
data with <code class="language-plaintext highlighter-rouge">filter(school == i)</code> where <code class="language-plaintext highlighter-rouge">i</code> will equal whichever school
we’re on in the loop: Bend Gate the first iteration, East Heights the
second, and so on.</p>

<p>So that we don’t have repeated legends in the final figure, we do a
few things. First, we add the argument <code class="language-plaintext highlighter-rouge">legendgroup = ~test</code> so that
plotly knows the tests (math, reading, and science) are grouped
together within school. Next, we set <code class="language-plaintext highlighter-rouge">showlegend = if_first</code>. What’s
<code class="language-plaintext highlighter-rouge">if_first</code>? It’s a Boolean (TRUE/FALSE) that’s only <code class="language-plaintext highlighter-rouge">TRUE</code> on the
first loop iteration, when <code class="language-plaintext highlighter-rouge">i == 1</code>, and <code class="language-plaintext highlighter-rouge">FALSE</code> otherwise. This means
that we only include a legend with the first school figure. Since
we’re going to put them all together at the end, that one will suffice
for all of them. Finally, we use <code class="language-plaintext highlighter-rouge">add_annotations()</code> with various
options so that the name of each school is printed on the top if its
own figure (<code class="language-plaintext highlighter-rouge">text = i</code>).</p>

<p>Once the loop has run, we use the function <code class="language-plaintext highlighter-rouge">subplot()</code> to join the
plots into one figure. With argument <code class="language-plaintext highlighter-rouge">nrows = 2</code>, we’ll end up with a
2x2 grid.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## set up vector of school names</span><span class="w">
</span><span class="n">schools</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Bend Gate"</span><span class="p">,</span><span class="w"> </span><span class="s2">"East Heights"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Niagara"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Spottsville"</span><span class="p">)</span><span class="w">

</span><span class="c1">## init list to hold plots</span><span class="w">
</span><span class="n">plot_list</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">

</span><span class="c1">## loop through schools to make each plot at a time</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">schools</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">

  </span><span class="c1">## TRUE if first school, otherwise FALSE;</span><span class="w">
  </span><span class="c1">## use so we only end up with one legend</span><span class="w">
  </span><span class="n">if_first</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
  
  </span><span class="c1">## store scatter plot in list using index i</span><span class="w">
  </span><span class="n">plot_list</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="c1">## filter to school i (one school at a time)</span><span class="w">
    </span><span class="n">add_trace</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df_ts_long</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">school</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">i</span><span class="p">),</span><span class="w">
              </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
              </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">score_std_sch</span><span class="p">,</span><span class="w">
              </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">test</span><span class="p">,</span><span class="w">
              </span><span class="n">legendgroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">test</span><span class="p">,</span><span class="w">
              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">score</span><span class="p">,</span><span class="w">
              </span><span class="n">showlegend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">if_first</span><span class="p">,</span><span class="w">   </span><span class="c1"># only TRUE the first time</span><span class="w">
              </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w">
              </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"lines"</span><span class="p">,</span><span class="w">
              </span><span class="c1">## notice that we include scaled and actual score in hover</span><span class="w">
              </span><span class="n">hovertemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste</span><span class="p">(</span><span class="s2">"Year: %{x}"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"Score (scaled): %{y}"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"&lt;br&gt;"</span><span class="p">,</span><span class="w">
                                    </span><span class="s2">"Score (actual): %{text}"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">layout</span><span class="p">(</span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">),</span><span class="w">
           </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Score"</span><span class="p">),</span><span class="w">
           </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Test"</span><span class="p">)))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="c1">## settings to add school name to title of each subplot</span><span class="w">
    </span><span class="n">add_annotations</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w">
                    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w">
                    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
                    </span><span class="n">yref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
                    </span><span class="n">xref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
                    </span><span class="n">xanchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"middle"</span><span class="p">,</span><span class="w">
                    </span><span class="n">yanchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"top"</span><span class="p">,</span><span class="w">
                    </span><span class="n">showarrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
                    </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">## combine subplots into on main plot like ggplot() facet_wrap()</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subplot</span><span class="p">(</span><span class="n">plot_list</span><span class="p">[[</span><span class="m">1</span><span class="p">]],</span><span class="w"> </span><span class="n">plot_list</span><span class="p">[[</span><span class="m">2</span><span class="p">]],</span><span class="w"> </span><span class="n">plot_list</span><span class="p">[[</span><span class="m">3</span><span class="p">]],</span><span class="w"> </span><span class="n">plot_list</span><span class="p">[[</span><span class="m">4</span><span class="p">]],</span><span class="w">
             </span><span class="n">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_facet.html"></iframe>
<!--/html_preserve-->

<p>Okay! The figure is a little scrunched on my website, but it might
look better by itself on a larger monitor. We could also play with
some sizing, but since HTML is sized on the fly and unique to each
screen, that may not be worth our time.</p>

<p>What is particularly cool about this figure is that even though we
plot the first-year standardized scores, we can include the real
scores in the tooltip. That let’s us have the best of both worlds: the
line graph shows the relationship we care about (how have scores
changed relative to each other and the first year?), but have the real
scores at our finger tips.</p>

<h2 id="tables">Tables</h2>

<p>Lastly, we can also use plotly to make a table. While perhaps not as
exiting as the figures, the table is interactive in that it prints
pretty (includes a scroll bar) and that the user can drag to reorder
columns. As a demo, we’ll make a table using the raw test score data
underlying the line graph we just made.</p>

<p>To make a table, you need to three key components:</p>

<ol>
  <li>The data you want to use (<code class="language-plaintext highlighter-rouge">df_ts</code>)</li>
  <li>The header you want plus its formatting</li>
  <li>The formatting for the table cells</li>
</ol>

<p>For 1 and 3, most of the formatting is simply to change the background
and font colors. For the <code class="language-plaintext highlighter-rouge">values</code> in the <code class="language-plaintext highlighter-rouge">header</code> list, we’ll use the
names from our wide-ish data frame. So that they are capitalized,
we’ll use <code class="language-plaintext highlighter-rouge">str_to_title()</code>, which capitalizes the first letter
only: <code class="language-plaintext highlighter-rouge">str_to_title(names(df_ts))</code>.</p>

<p>For the data in the <code class="language-plaintext highlighter-rouge">cells</code>, well convert our data frame to a matrix
using <code class="language-plaintext highlighter-rouge">as.matrix()</code>. Because of a quirk of the program, we’ll need to
transpose the matrix with <code class="language-plaintext highlighter-rouge">t()</code>. Finally, so we don’t repeat the
column names as the first (remember, we’ve already included them in
header), we’ll <code class="language-plaintext highlighter-rouge">unname()</code> the data frame. All together, it’s
<code class="language-plaintext highlighter-rouge">t(as.matrix(unname(df_ts)))</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## make interactive table</span><span class="w">
</span><span class="n">tab</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="w">
  </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"table"</span><span class="p">,</span><span class="w">
  </span><span class="c1">## adjust how header row looks</span><span class="w">
  </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="c1">## use str_to_title() with tibble column names: math --&gt; Math</span><span class="w">
    </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">str_to_title</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">df_ts</span><span class="p">))),</span><span class="w">
    </span><span class="c1">## left align school names, and center all other columns (hence -1)</span><span class="w">
    </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"left"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"center"</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="p">(</span><span class="n">df_ts</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)),</span><span class="w">
    </span><span class="c1">## make vertical lines thicker</span><span class="w">
    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">),</span><span class="w">
    </span><span class="c1">## fill color with blue</span><span class="w">
    </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rgba(108, 154, 195, 0.8)"</span><span class="p">),</span><span class="w">
    </span><span class="c1">## set font to sans serif with bigger size and white color</span><span class="w">
    </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Arial"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">14</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="p">)),</span><span class="w">
  </span><span class="c1">## adjust how cells look</span><span class="w">
  </span><span class="n">cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="c1">## use df_ts, but...</span><span class="w">
    </span><span class="c1">## 1. convert to matrix,</span><span class="w">
    </span><span class="c1">## 2. transpose using t(),</span><span class="w">
    </span><span class="c1">## 3. drop names (already in header row)</span><span class="w">
    </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">as.matrix</span><span class="p">(</span><span class="n">unname</span><span class="p">(</span><span class="n">df_ts</span><span class="p">))),</span><span class="w">
    </span><span class="c1">## same alignment as header</span><span class="w">
    </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"left"</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="s2">"center"</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="p">(</span><span class="n">df_ts</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)),</span><span class="w">
    </span><span class="c1">## same vertical line setup as header</span><span class="w">
    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
    </span><span class="c1">## fill first column different color to stand out</span><span class="w">
    </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"rgba(108, 154, 195, 0.5)"</span><span class="p">,</span><span class="w">
                          </span><span class="s2">"rgba(226, 143, 65, 0.5)"</span><span class="p">)),</span><span class="w">
    </span><span class="c1">## same font as header, but smaller and different color</span><span class="w">
    </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Arial"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"black"</span><span class="p">))</span><span class="w">
  </span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## show</span><span class="w">
</span><span class="n">tab</span><span class="w">
</span></code></pre></div></div>

<!--html_preserve-->
<iframe src="plotly/plt_table.html"></iframe>
<!--/html_preserve-->

<p>If you hover over a cell and then click, you should be able to drag
and drop the columns into a new order. It seems a bit much for this
small data set, but having an “active” data table that you can
manipulate could come in handy during meetings or your own research
process.</p>




	<!-- <p> -->
	<!--   Updated:  -->
	<!-- </p> -->
      </section>
      <footer>
        <p>
  Benjamin Skinner</br>  
  Assistant Professor</br>  
  University of Florida</br>
  <a href="https://www.btskinner.io" class="iconlink" alt="Personal website">
    <i class="fas fa-home fa-lg"></i></a> | 
  <a href="https://github.com/btskinner" class="iconlink" alt="Github
								profile">
    <i class="fab fa-github fa-lg"></i></a> |
  <a href="https://twitter.com/btskinner" class="iconlink" alt="Twitter profile">
    <i class="fab fa-twitter fa-lg"></i></a>
</p>
<p>
  <small>
    <a href="https://pages.github.com">GitHub Pages</a> |
    <a href="https://github.com/orderedlist/minimal">Theme</a> |
    <a href="/past/edh7916/2022/spring/releases/">Releases</a>
  </small>
</p>

      </footer>
    </div>

    <!-- load Javascript if page requires it -->
    
    
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-63981025-1', 'auto');
        ga('send', 'pageview');
    </script>
  
  </body>
</html>
